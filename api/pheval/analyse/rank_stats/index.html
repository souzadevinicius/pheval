
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://monarch-initiative.github.io/pheval/api/pheval/analyse/rank_stats/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Rank stats - PhEval</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="https://unpkg.com/mermaid@8.5.1/dist/mermaid.css">
    
      <link rel="stylesheet" href="../../../../mermaid.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#src.pheval.analyse.rank_stats" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="PhEval" class="md-header__button md-logo" aria-label="PhEval" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PhEval
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rank stats
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Night Mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Night Mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent=""  aria-label="Day Mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Day Mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/monarch-initiative/pheval" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="PhEval" class="md-nav__button md-logo" aria-label="PhEval" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    PhEval
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/monarch-initiative/pheval" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Pipeline
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Pipeline" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Pipeline
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../exomiser_pipeline/" class="md-nav__link">
        PhEval Pipeline Exomiser Runner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pipeline/" class="md-nav__link">
        PhEval Pipeline
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../contact/" class="md-nav__link">
        Contact Us
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          API Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Documentation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        Cli
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../config_parser/" class="md-nav__link">
        Config parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../constants/" class="md-nav__link">
        Constants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../run_metadata/" class="md-nav__link">
        Run metadata
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          analyse
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="analyse" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          analyse
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../benchmark_generator/" class="md-nav__link">
        Benchmark generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../benchmarking_data/" class="md-nav__link">
        Benchmarking data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../binary_classification_stats/" class="md-nav__link">
        Binary classification stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../disease_prioritisation_analysis/" class="md-nav__link">
        Disease prioritisation analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gene_prioritisation_analysis/" class="md-nav__link">
        Gene prioritisation analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generate_plots/" class="md-nav__link">
        Generate plots
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../generate_summary_outputs/" class="md-nav__link">
        Generate summary outputs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parse_benchmark_summary/" class="md-nav__link">
        Parse benchmark summary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parse_pheval_result/" class="md-nav__link">
        Parse pheval result
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prioritisation_rank_recorder/" class="md-nav__link">
        Prioritisation rank recorder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../prioritisation_result_types/" class="md-nav__link">
        Prioritisation result types
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Rank stats
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Rank stats
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats" class="md-nav__link">
    src.pheval.analyse.rank_stats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats" class="md-nav__link">
    RankStats
  </a>
  
    <nav class="md-nav" aria-label="RankStats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.add_rank" class="md-nav__link">
    add_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.f_beta_score_at_k" class="md-nav__link">
    f_beta_score_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_average_precision_at_k" class="md-nav__link">
    mean_average_precision_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_normalised_discounted_cumulative_gain" class="md-nav__link">
    mean_normalised_discounted_cumulative_gain()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_reciprocal_rank" class="md-nav__link">
    mean_reciprocal_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_difference" class="md-nav__link">
    percentage_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_found" class="md-nav__link">
    percentage_found()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_rank" class="md-nav__link">
    percentage_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top" class="md-nav__link">
    percentage_top()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top10" class="md-nav__link">
    percentage_top10()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top3" class="md-nav__link">
    percentage_top3()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top5" class="md-nav__link">
    percentage_top5()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.precision_at_k" class="md-nav__link">
    precision_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.return_mean_reciprocal_rank" class="md-nav__link">
    return_mean_reciprocal_rank()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter" class="md-nav__link">
    RankStatsWriter
  </a>
  
    <nav class="md-nav" aria-label="RankStatsWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.write_row" class="md-nav__link">
    write_row()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../run_data_parser/" class="md-nav__link">
        Run data parser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../variant_prioritisation_analysis/" class="md-nav__link">
        Variant prioritisation analysis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_6">
          infra
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="infra" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          infra
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../infra/exomiserdb/" class="md-nav__link">
        Exomiserdb
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" type="checkbox" id="__nav_5_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_7">
          post_processing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="post_processing" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          post_processing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../post_processing/post_processing/" class="md-nav__link">
        Post processing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_8" type="checkbox" id="__nav_5_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_8">
          prepare
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="prepare" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_8">
          <span class="md-nav__icon md-icon"></span>
          prepare
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/create_noisy_phenopackets/" class="md-nav__link">
        Create noisy phenopackets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/create_spiked_vcf/" class="md-nav__link">
        Create spiked vcf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/custom_exceptions/" class="md-nav__link">
        Custom exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/prepare_corpus/" class="md-nav__link">
        Prepare corpus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/update_phenopacket/" class="md-nav__link">
        Update phenopacket
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" type="checkbox" id="__nav_5_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_9">
          runners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="runners" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          runners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runners/runner/" class="md-nav__link">
        Runner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_10" type="checkbox" id="__nav_5_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_10">
          utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="utils" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/exomiser/" class="md-nav__link">
        Exomiser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/file_utils/" class="md-nav__link">
        File utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/phenopacket_utils/" class="md-nav__link">
        Phenopacket utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/semsim_utils/" class="md-nav__link">
        Semsim utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Resources for contributors
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resources for contributors" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Resources for contributors
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developing_a_pheval_plugin/" class="md-nav__link">
        Developing a PhEval Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/" class="md-nav__link">
        Contributions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../styleguide/" class="md-nav__link">
        Monarch Style Guide for PhEval
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../CODE_OF_CONDUCT/" class="md-nav__link">
        Contributor Covenant Code of Conduct
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats" class="md-nav__link">
    src.pheval.analyse.rank_stats
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats" class="md-nav__link">
    RankStats
  </a>
  
    <nav class="md-nav" aria-label="RankStats">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.add_rank" class="md-nav__link">
    add_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.f_beta_score_at_k" class="md-nav__link">
    f_beta_score_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_average_precision_at_k" class="md-nav__link">
    mean_average_precision_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_normalised_discounted_cumulative_gain" class="md-nav__link">
    mean_normalised_discounted_cumulative_gain()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.mean_reciprocal_rank" class="md-nav__link">
    mean_reciprocal_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_difference" class="md-nav__link">
    percentage_difference()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_found" class="md-nav__link">
    percentage_found()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_rank" class="md-nav__link">
    percentage_rank()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top" class="md-nav__link">
    percentage_top()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top10" class="md-nav__link">
    percentage_top10()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top3" class="md-nav__link">
    percentage_top3()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.percentage_top5" class="md-nav__link">
    percentage_top5()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.precision_at_k" class="md-nav__link">
    precision_at_k()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStats.return_mean_reciprocal_rank" class="md-nav__link">
    return_mean_reciprocal_rank()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter" class="md-nav__link">
    RankStatsWriter
  </a>
  
    <nav class="md-nav" aria-label="RankStatsWriter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.pheval.analyse.rank_stats.RankStatsWriter.write_row" class="md-nav__link">
    write_row()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/monarch-initiative/pheval/edit/docs/docs/api/pheval/analyse/rank_stats.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>Rank stats</h1>

<div class="doc doc-object doc-module">


<a id="src.pheval.analyse.rank_stats"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="src.pheval.analyse.rank_stats.RankStats" class="doc doc-heading">
        <code>RankStats</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents ">

  
      <p>Store statistics related to ranking.</p>

  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>top</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Count of top-ranked matches.</p></td>
        </tr>
        <tr>
          <td><code>top3</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Count of matches within the top 3 ranks.</p></td>
        </tr>
        <tr>
          <td><code>top5</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Count of matches within the top 5 ranks.</p></td>
        </tr>
        <tr>
          <td><code>top10</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Count of matches within the top 10 ranks.</p></td>
        </tr>
        <tr>
          <td><code>found</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Count of found matches.</p></td>
        </tr>
        <tr>
          <td><code>total</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Total count of matches.</p></td>
        </tr>
        <tr>
          <td><code>reciprocal_ranks</code></td>
          <td>
                <code><span title="typing.List">List</span>[float]</code>
          </td>
          <td><p>List of reciprocal ranks.</p></td>
        </tr>
        <tr>
          <td><code>relevant_ranks</code></td>
          <td>
                <code><span title="typing.List">List</span>[<span title="typing.List">List</span>[int]]</code>
          </td>
          <td><p>Nested list of ranks for the known entities for all cases in a run.</p></td>
        </tr>
        <tr>
          <td><code>mrr</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Mean Reciprocal Rank (MRR). Defaults to None.</p></td>
        </tr>
    </tbody>
  </table>


        <details class="quote">
          <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">RankStats</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Store statistics related to ranking.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        top (int): Count of top-ranked matches.</span>
<span class="sd">        top3 (int): Count of matches within the top 3 ranks.</span>
<span class="sd">        top5 (int): Count of matches within the top 5 ranks.</span>
<span class="sd">        top10 (int): Count of matches within the top 10 ranks.</span>
<span class="sd">        found (int): Count of found matches.</span>
<span class="sd">        total (int): Total count of matches.</span>
<span class="sd">        reciprocal_ranks (List[float]): List of reciprocal ranks.</span>
<span class="sd">        relevant_ranks List[List[int]]: Nested list of ranks for the known entities for all cases in a run.</span>
<span class="sd">        mrr (float): Mean Reciprocal Rank (MRR). Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">top</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">top3</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">top5</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">top10</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">found</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">total</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">reciprocal_ranks</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">relevant_result_ranks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">mrr</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">add_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add rank for matched result.</span>

<span class="sd">        Args:</span>
<span class="sd">            rank (int): The rank value to be added.</span>

<span class="sd">        Notes:</span>
<span class="sd">            This method updates the internal attributes of the RankStats object based on the provided rank value.</span>
<span class="sd">            It calculates various statistics such as the count of top ranks (1, 3, 5, and 10),</span>
<span class="sd">            the total number of ranks found,and the reciprocal rank.</span>
<span class="sd">            This function modifies the object&#39;s state by updating the internal attributes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">rank</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">found</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top3</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top5</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top10</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage rank.</span>

<span class="sd">        Args:</span>
<span class="sd">            value (int): The value for which the percentage rank needs to be calculated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The calculated percentage rank based on the provided value and the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>

    <span class="k">def</span> <span class="nf">percentage_top</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage of top matches.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The percentage of top matches compared to the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">percentage_top3</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage of matches within the top 3.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The percentage of matches within the top 3 compared to the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">percentage_top5</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage of matches within the top 5.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The percentage of matches within the top 5 compared to the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top5</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">percentage_top10</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage of matches within the top 10.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The percentage of matches within the top 10 compared to the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top10</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">percentage_found</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage of matches found.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The percentage of matches found compared to the total count.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">found</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">percentage_difference</span><span class="p">(</span><span class="n">percentage_value_1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">percentage_value_2</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the percentage difference between two percentage values.</span>

<span class="sd">        Args:</span>
<span class="sd">            percentage_value_1 (float): The first percentage value.</span>
<span class="sd">            percentage_value_2 (float): The second percentage value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The difference between the two percentage values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">percentage_value_1</span> <span class="o">-</span> <span class="n">percentage_value_2</span>

    <span class="k">def</span> <span class="nf">mean_reciprocal_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the Mean Reciprocal Rank (MRR) for the stored ranks.</span>

<span class="sd">        The Mean Reciprocal Rank is computed as the mean of the reciprocal ranks</span>
<span class="sd">        for the found cases.</span>

<span class="sd">        If the total number of cases differs from the number of found cases,</span>
<span class="sd">        this method extends the reciprocal ranks list with zeroes for missing cases.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The calculated Mean Reciprocal Rank.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">:</span>
            <span class="n">missing_cases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">found</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">missing_cases</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">return_mean_reciprocal_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve or calculate the Mean Reciprocal Rank (MRR).</span>

<span class="sd">        If a pre-calculated MRR value exists (stored in the &#39;mrr&#39; attribute), this method returns that value.</span>
<span class="sd">        Otherwise, it computes the Mean Reciprocal Rank using the &#39;mean_reciprocal_rank&#39; method.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The Mean Reciprocal Rank value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mrr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mrr</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean_reciprocal_rank</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">precision_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the precision at k.</span>
<span class="sd">        Precision at k is the ratio of relevant items in the top-k predictions to the total number of predictions.</span>
<span class="sd">        It measures the accuracy of the top-k predictions made by a model.</span>

<span class="sd">        Args:</span>
<span class="sd">            k (int): The number of top predictions to consider.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The precision at k, ranging from 0.0 to 1.0.</span>
<span class="sd">            A higher precision indicates a better performance in identifying relevant items in the top-k predictions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">k_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;top</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span>
        <span class="k">return</span> <span class="n">k_attr</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="n">k</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_average_precision_at_k</span><span class="p">(</span>
        <span class="n">number_of_relevant_entities_at_k</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">precision_at_k</span><span class="p">:</span> <span class="nb">float</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the Average Precision at k.</span>

<span class="sd">        Average Precision at k (AP@k) is a metric used to evaluate the precision of a ranked retrieval system.</span>
<span class="sd">        It measures the precision at each relevant position up to k and takes the average.</span>

<span class="sd">        Args:</span>
<span class="sd">            number_of_relevant_entities_at_k (int): The count of relevant entities in the top-k predictions.</span>
<span class="sd">            precision_at_k (float): The precision at k - the sum of the precision values at each relevant position.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The Average Precision at k, ranging from 0.0 to 1.0.</span>
<span class="sd">                   A higher value indicates better precision in the top-k predictions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">number_of_relevant_entities_at_k</span><span class="p">)</span> <span class="o">*</span> <span class="n">precision_at_k</span>
            <span class="k">if</span> <span class="n">number_of_relevant_entities_at_k</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="k">else</span> <span class="mf">0.0</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">mean_average_precision_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the Mean Average Precision at k.</span>

<span class="sd">        Mean Average Precision at k (MAP@k) is a performance metric for ranked data.</span>
<span class="sd">        It calculates the average precision at k for each result rank and then takes the mean across all queries.</span>

<span class="sd">        Args:</span>
<span class="sd">            k (int): The number of top predictions to consider for precision calculation.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The Mean Average Precision at k, ranging from 0.0 to 1.0.</span>
<span class="sd">                   A higher value indicates better performance in ranking relevant entities higher in the predictions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cumulative_average_precision_scores</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">result_ranks</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relevant_result_ranks</span><span class="p">:</span>
            <span class="n">precision_at_k</span><span class="p">,</span> <span class="n">number_of_relevant_entities_at_k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">result_ranks</span><span class="p">:</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">:</span>
                    <span class="n">number_of_relevant_entities_at_k</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">precision_at_k</span> <span class="o">+=</span> <span class="n">number_of_relevant_entities_at_k</span> <span class="o">/</span> <span class="n">rank</span>
                <span class="n">cumulative_average_precision_scores</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_average_precision_at_k</span><span class="p">(</span>
                    <span class="n">number_of_relevant_entities_at_k</span><span class="p">,</span> <span class="n">precision_at_k</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="n">cumulative_average_precision_scores</span>

    <span class="k">def</span> <span class="nf">f_beta_score_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percentage_at_k</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the F-beta score at k.</span>

<span class="sd">        The F-beta score is a metric that combines precision and recall,</span>
<span class="sd">        with beta controlling the emphasis on precision.</span>
<span class="sd">        The Beta value is set to the value of 1 to allow for equal weighting for both precision and recall.</span>
<span class="sd">        This method computes the F-beta score at a specific percentage threshold within the top-k predictions.</span>

<span class="sd">        Args:</span>
<span class="sd">            percentage_at_k (float): The percentage of true positive predictions within the top-k.</span>
<span class="sd">            k (int): The number of top predictions to consider.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The F-beta score at k, ranging from 0.0 to 1.0.</span>
<span class="sd">                   A higher score indicates better trade-off between precision and recall.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
        <span class="n">recall_at_k</span> <span class="o">=</span> <span class="n">percentage_at_k</span> <span class="o">/</span> <span class="mi">100</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">precision</span> <span class="o">*</span> <span class="n">recall_at_k</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall_at_k</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall_at_k</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="k">else</span> <span class="mi">0</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the mean Normalised Discounted Cumulative Gain (NDCG) for a given rank cutoff.</span>

<span class="sd">        NDCG measures the effectiveness of a ranking by considering both the relevance and the order of items.</span>

<span class="sd">        Args:</span>
<span class="sd">            k (int): The rank cutoff for calculating NDCG.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: The mean NDCG score across all query results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ndcg_scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">result_ranks</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relevant_result_ranks</span><span class="p">:</span>
            <span class="n">result_ranks</span> <span class="o">=</span> <span class="p">[</span><span class="n">rank</span> <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">result_ranks</span> <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">]</span>
            <span class="n">result_ranks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_ranks</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span>
            <span class="n">ideal_ranking</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result_ranks</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ndcg_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ndcg_score</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">ideal_ranking</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">result_ranks</span><span class="p">])))</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ndcg_scores</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.add_rank" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_rank</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add rank for matched result.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>rank</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The rank value to be added.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="notes">
  <summary>Notes</summary>
  <p>This method updates the internal attributes of the RankStats object based on the provided rank value.
It calculates various statistics such as the count of top ranks (1, 3, 5, and 10),
the total number of ranks found,and the reciprocal rank.
This function modifies the object's state by updating the internal attributes.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rank</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add rank for matched result.</span>

<span class="sd">    Args:</span>
<span class="sd">        rank (int): The rank value to be added.</span>

<span class="sd">    Notes:</span>
<span class="sd">        This method updates the internal attributes of the RankStats object based on the provided rank value.</span>
<span class="sd">        It calculates various statistics such as the count of top ranks (1, 3, 5, and 10),</span>
<span class="sd">        the total number of ranks found,and the reciprocal rank.</span>
<span class="sd">        This function modifies the object&#39;s state by updating the internal attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">rank</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">found</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">rank</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top3</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top5</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">rank</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top10</span> <span class="o">+=</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.f_beta_score_at_k" class="doc doc-heading">
<code class="highlight language-python"><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">percentage_at_k</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the F-beta score at k.</p>
<p>The F-beta score is a metric that combines precision and recall,
with beta controlling the emphasis on precision.
The Beta value is set to the value of 1 to allow for equal weighting for both precision and recall.
This method computes the F-beta score at a specific percentage threshold within the top-k predictions.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>percentage_at_k</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of true positive predictions within the top-k.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>k</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The number of top predictions to consider.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The F-beta score at k, ranging from 0.0 to 1.0.
   A higher score indicates better trade-off between precision and recall.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">f_beta_score_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">percentage_at_k</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the F-beta score at k.</span>

<span class="sd">    The F-beta score is a metric that combines precision and recall,</span>
<span class="sd">    with beta controlling the emphasis on precision.</span>
<span class="sd">    The Beta value is set to the value of 1 to allow for equal weighting for both precision and recall.</span>
<span class="sd">    This method computes the F-beta score at a specific percentage threshold within the top-k predictions.</span>

<span class="sd">    Args:</span>
<span class="sd">        percentage_at_k (float): The percentage of true positive predictions within the top-k.</span>
<span class="sd">        k (int): The number of top predictions to consider.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The F-beta score at k, ranging from 0.0 to 1.0.</span>
<span class="sd">               A higher score indicates better trade-off between precision and recall.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">precision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
    <span class="n">recall_at_k</span> <span class="o">=</span> <span class="n">percentage_at_k</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">precision</span> <span class="o">*</span> <span class="n">recall_at_k</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall_at_k</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">precision</span> <span class="o">+</span> <span class="n">recall_at_k</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">else</span> <span class="mi">0</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.mean_average_precision_at_k" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="n">k</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the Mean Average Precision at k.</p>
<p>Mean Average Precision at k (MAP@k) is a performance metric for ranked data.
It calculates the average precision at k for each result rank and then takes the mean across all queries.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>k</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The number of top predictions to consider for precision calculation.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The Mean Average Precision at k, ranging from 0.0 to 1.0.
   A higher value indicates better performance in ranking relevant entities higher in the predictions.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean_average_precision_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the Mean Average Precision at k.</span>

<span class="sd">    Mean Average Precision at k (MAP@k) is a performance metric for ranked data.</span>
<span class="sd">    It calculates the average precision at k for each result rank and then takes the mean across all queries.</span>

<span class="sd">    Args:</span>
<span class="sd">        k (int): The number of top predictions to consider for precision calculation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The Mean Average Precision at k, ranging from 0.0 to 1.0.</span>
<span class="sd">               A higher value indicates better performance in ranking relevant entities higher in the predictions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cumulative_average_precision_scores</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">result_ranks</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relevant_result_ranks</span><span class="p">:</span>
        <span class="n">precision_at_k</span><span class="p">,</span> <span class="n">number_of_relevant_entities_at_k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">result_ranks</span><span class="p">:</span>
            <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">:</span>
                <span class="n">number_of_relevant_entities_at_k</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">precision_at_k</span> <span class="o">+=</span> <span class="n">number_of_relevant_entities_at_k</span> <span class="o">/</span> <span class="n">rank</span>
            <span class="n">cumulative_average_precision_scores</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_average_precision_at_k</span><span class="p">(</span>
                <span class="n">number_of_relevant_entities_at_k</span><span class="p">,</span> <span class="n">precision_at_k</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="n">cumulative_average_precision_scores</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.mean_normalised_discounted_cumulative_gain" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="n">k</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the mean Normalised Discounted Cumulative Gain (NDCG) for a given rank cutoff.</p>
<p>NDCG measures the effectiveness of a ranking by considering both the relevance and the order of items.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>k</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The rank cutoff for calculating NDCG.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The mean NDCG score across all query results.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the mean Normalised Discounted Cumulative Gain (NDCG) for a given rank cutoff.</span>

<span class="sd">    NDCG measures the effectiveness of a ranking by considering both the relevance and the order of items.</span>

<span class="sd">    Args:</span>
<span class="sd">        k (int): The rank cutoff for calculating NDCG.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The mean NDCG score across all query results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ndcg_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">result_ranks</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">relevant_result_ranks</span><span class="p">:</span>
        <span class="n">result_ranks</span> <span class="o">=</span> <span class="p">[</span><span class="n">rank</span> <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="n">result_ranks</span> <span class="k">if</span> <span class="n">rank</span> <span class="o">&lt;=</span> <span class="n">k</span><span class="p">]</span>
        <span class="n">result_ranks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span> <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_ranks</span> <span class="k">else</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">k</span><span class="p">)]</span>
        <span class="n">ideal_ranking</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">result_ranks</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">ndcg_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ndcg_score</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">ideal_ranking</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">result_ranks</span><span class="p">])))</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">ndcg_scores</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.mean_reciprocal_rank" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mean_reciprocal_rank</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the Mean Reciprocal Rank (MRR) for the stored ranks.</p>
<p>The Mean Reciprocal Rank is computed as the mean of the reciprocal ranks
for the found cases.</p>
<p>If the total number of cases differs from the number of found cases,
this method extends the reciprocal ranks list with zeroes for missing cases.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The calculated Mean Reciprocal Rank.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mean_reciprocal_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the Mean Reciprocal Rank (MRR) for the stored ranks.</span>

<span class="sd">    The Mean Reciprocal Rank is computed as the mean of the reciprocal ranks</span>
<span class="sd">    for the found cases.</span>

<span class="sd">    If the total number of cases differs from the number of found cases,</span>
<span class="sd">    this method extends the reciprocal ranks list with zeroes for missing cases.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The calculated Mean Reciprocal Rank.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span><span class="p">:</span>
        <span class="n">missing_cases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">found</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">missing_cases</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mean</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reciprocal_ranks</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_difference" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_difference</span><span class="p">(</span><span class="n">percentage_value_1</span><span class="p">,</span> <span class="n">percentage_value_2</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage difference between two percentage values.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>percentage_value_1</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The first percentage value.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>percentage_value_2</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>The second percentage value.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The difference between the two percentage values.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">percentage_difference</span><span class="p">(</span><span class="n">percentage_value_1</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">percentage_value_2</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage difference between two percentage values.</span>

<span class="sd">    Args:</span>
<span class="sd">        percentage_value_1 (float): The first percentage value.</span>
<span class="sd">        percentage_value_2 (float): The second percentage value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The difference between the two percentage values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">percentage_value_1</span> <span class="o">-</span> <span class="n">percentage_value_2</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_found" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_found</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage of matches found.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of matches found compared to the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_found</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage of matches found.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The percentage of matches found compared to the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">found</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_rank" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_rank</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage rank.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>value</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The value for which the percentage rank needs to be calculated.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The calculated percentage rank based on the provided value and the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage rank.</span>

<span class="sd">    Args:</span>
<span class="sd">        value (int): The value for which the percentage rank needs to be calculated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The calculated percentage rank based on the provided value and the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">value</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">total</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_top" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_top</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage of top matches.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of top matches compared to the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_top</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage of top matches.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The percentage of top matches compared to the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_top10" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_top10</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage of matches within the top 10.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of matches within the top 10 compared to the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_top10</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage of matches within the top 10.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The percentage of matches within the top 10 compared to the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top10</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_top3" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_top3</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage of matches within the top 3.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of matches within the top 3 compared to the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_top3</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage of matches within the top 3.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The percentage of matches within the top 3 compared to the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top3</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.percentage_top5" class="doc doc-heading">
<code class="highlight language-python"><span class="n">percentage_top5</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the percentage of matches within the top 5.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The percentage of matches within the top 5 compared to the total count.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">percentage_top5</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the percentage of matches within the top 5.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The percentage of matches within the top 5 compared to the total count.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">percentage_rank</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top5</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.precision_at_k" class="doc doc-heading">
<code class="highlight language-python"><span class="n">precision_at_k</span><span class="p">(</span><span class="n">k</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Calculate the precision at k.
Precision at k is the ratio of relevant items in the top-k predictions to the total number of predictions.
It measures the accuracy of the top-k predictions made by a model.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>k</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The number of top predictions to consider.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The precision at k, ranging from 0.0 to 1.0.</p></td>
        </tr>
        <tr>
<td></td>          <td>
                <code>float</code>
          </td>
          <td><p>A higher precision indicates a better performance in identifying relevant items in the top-k predictions.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">precision_at_k</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">k</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the precision at k.</span>
<span class="sd">    Precision at k is the ratio of relevant items in the top-k predictions to the total number of predictions.</span>
<span class="sd">    It measures the accuracy of the top-k predictions made by a model.</span>

<span class="sd">    Args:</span>
<span class="sd">        k (int): The number of top predictions to consider.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The precision at k, ranging from 0.0 to 1.0.</span>
<span class="sd">        A higher precision indicates a better performance in identifying relevant items in the top-k predictions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">k_attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;top</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">k</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span>
    <span class="k">return</span> <span class="n">k_attr</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="n">k</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStats.return_mean_reciprocal_rank" class="doc doc-heading">
<code class="highlight language-python"><span class="n">return_mean_reciprocal_rank</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve or calculate the Mean Reciprocal Rank (MRR).</p>
<p>If a pre-calculated MRR value exists (stored in the 'mrr' attribute), this method returns that value.
Otherwise, it computes the Mean Reciprocal Rank using the 'mean_reciprocal_rank' method.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>float</code></td>          <td>
                <code>float</code>
          </td>
          <td><p>The Mean Reciprocal Rank value.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">return_mean_reciprocal_rank</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve or calculate the Mean Reciprocal Rank (MRR).</span>

<span class="sd">    If a pre-calculated MRR value exists (stored in the &#39;mrr&#39; attribute), this method returns that value.</span>
<span class="sd">    Otherwise, it computes the Mean Reciprocal Rank using the &#39;mean_reciprocal_rank&#39; method.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: The Mean Reciprocal Rank value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mrr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mrr</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean_reciprocal_rank</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="src.pheval.analyse.rank_stats.RankStatsWriter" class="doc doc-heading">
        <code>RankStatsWriter</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Class for writing the rank stats to a file.</p>


        <details class="quote">
          <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RankStatsWriter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for writing the rank stats to a file.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise the RankStatsWriter class</span>
<span class="sd">        Args:</span>
<span class="sd">            file (Path): Path to the file where rank stats will be written</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="s2">&quot;results_directory_path&quot;</span><span class="p">,</span>
                <span class="s2">&quot;top&quot;</span><span class="p">,</span>
                <span class="s2">&quot;top3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;top5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;top10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;found&quot;</span><span class="p">,</span>
                <span class="s2">&quot;total&quot;</span><span class="p">,</span>
                <span class="s2">&quot;mean_reciprocal_rank&quot;</span><span class="p">,</span>
                <span class="s2">&quot;percentage_top&quot;</span><span class="p">,</span>
                <span class="s2">&quot;percentage_top3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;percentage_top5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;percentage_top10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;percentage_found&quot;</span><span class="p">,</span>
                <span class="s2">&quot;precision@1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;precision@3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;precision@5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;precision@10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAP@1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAP@3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAP@5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;MAP@10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;f_beta_score@1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;f_beta_score@3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;f_beta_score@5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;f_beta_score@10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NDCG@3&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NDCG@5&quot;</span><span class="p">,</span>
                <span class="s2">&quot;NDCG@10&quot;</span><span class="p">,</span>
                <span class="s2">&quot;true_positives&quot;</span><span class="p">,</span>
                <span class="s2">&quot;false_positives&quot;</span><span class="p">,</span>
                <span class="s2">&quot;true_negatives&quot;</span><span class="p">,</span>
                <span class="s2">&quot;false_negatives&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sensitivity&quot;</span><span class="p">,</span>
                <span class="s2">&quot;specificity&quot;</span><span class="p">,</span>
                <span class="s2">&quot;precision&quot;</span><span class="p">,</span>
                <span class="s2">&quot;negative_predictive_value&quot;</span><span class="p">,</span>
                <span class="s2">&quot;false_positive_rate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;false_discovery_rate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;false_negative_rate&quot;</span><span class="p">,</span>
                <span class="s2">&quot;accuracy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;f1_score&quot;</span><span class="p">,</span>
                <span class="s2">&quot;matthews_correlation_coefficient&quot;</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">write_row</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">directory</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">rank_stats</span><span class="p">:</span> <span class="n">RankStats</span><span class="p">,</span>
        <span class="n">binary_classification</span><span class="p">:</span> <span class="n">BinaryClassificationStats</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write summary rank statistics row for a run to the file.</span>

<span class="sd">        Args:</span>
<span class="sd">            directory (Path): Path to the results directory corresponding to the run</span>
<span class="sd">            rank_stats (RankStats): RankStats instance containing rank statistics corresponding to the run</span>

<span class="sd">        Raises:</span>
<span class="sd">            IOError: If there is an error writing to the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">directory</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">top</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">top3</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">top5</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">top10</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">found</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_reciprocal_rank</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top3</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top5</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top10</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_found</span><span class="p">(),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top</span><span class="p">(),</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top3</span><span class="p">(),</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top5</span><span class="p">(),</span> <span class="mi">5</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top10</span><span class="p">(),</span> <span class="mi">10</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                    <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">true_positives</span><span class="p">,</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_positives</span><span class="p">,</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">true_negatives</span><span class="p">,</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_negatives</span><span class="p">,</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">sensitivity</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">specificity</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">precision</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">negative_predictive_value</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_positive_rate</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_discovery_rate</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_negative_rate</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">accuracy</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">f1_score</span><span class="p">(),</span>
                    <span class="n">binary_classification</span><span class="o">.</span><span class="n">matthews_correlation_coefficient</span><span class="p">(),</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error writing &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Close the file used for writing rank statistics.</span>

<span class="sd">        Raises:</span>
<span class="sd">            IOError: If there&#39;s an error while closing the file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error closing &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStatsWriter.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Initialise the RankStatsWriter class</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span></code>
          </td>
          <td><p>Path to the file where rank stats will be written</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">:</span> <span class="n">Path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialise the RankStatsWriter class</span>
<span class="sd">    Args:</span>
<span class="sd">        file (Path): Path to the file where rank stats will be written</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;results_directory_path&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;top10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;found&quot;</span><span class="p">,</span>
            <span class="s2">&quot;total&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mean_reciprocal_rank&quot;</span><span class="p">,</span>
            <span class="s2">&quot;percentage_top&quot;</span><span class="p">,</span>
            <span class="s2">&quot;percentage_top3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;percentage_top5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;percentage_top10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;percentage_found&quot;</span><span class="p">,</span>
            <span class="s2">&quot;precision@1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;precision@3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;precision@5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;precision@10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MAP@1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MAP@3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MAP@5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;MAP@10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;f_beta_score@1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;f_beta_score@3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;f_beta_score@5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;f_beta_score@10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;NDCG@3&quot;</span><span class="p">,</span>
            <span class="s2">&quot;NDCG@5&quot;</span><span class="p">,</span>
            <span class="s2">&quot;NDCG@10&quot;</span><span class="p">,</span>
            <span class="s2">&quot;true_positives&quot;</span><span class="p">,</span>
            <span class="s2">&quot;false_positives&quot;</span><span class="p">,</span>
            <span class="s2">&quot;true_negatives&quot;</span><span class="p">,</span>
            <span class="s2">&quot;false_negatives&quot;</span><span class="p">,</span>
            <span class="s2">&quot;sensitivity&quot;</span><span class="p">,</span>
            <span class="s2">&quot;specificity&quot;</span><span class="p">,</span>
            <span class="s2">&quot;precision&quot;</span><span class="p">,</span>
            <span class="s2">&quot;negative_predictive_value&quot;</span><span class="p">,</span>
            <span class="s2">&quot;false_positive_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;false_discovery_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;false_negative_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;accuracy&quot;</span><span class="p">,</span>
            <span class="s2">&quot;f1_score&quot;</span><span class="p">,</span>
            <span class="s2">&quot;matthews_correlation_coefficient&quot;</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStatsWriter.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Close the file used for writing rank statistics.</p>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>IOError</code>
          </td>
          <td><p>If there's an error while closing the file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Close the file used for writing rank statistics.</span>

<span class="sd">    Raises:</span>
<span class="sd">        IOError: If there&#39;s an error while closing the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error closing &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="src.pheval.analyse.rank_stats.RankStatsWriter.write_row" class="doc doc-heading">
<code class="highlight language-python"><span class="n">write_row</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">rank_stats</span><span class="p">,</span> <span class="n">binary_classification</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Write summary rank statistics row for a run to the file.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>directory</code></td>
          <td>
                <code><span title="pathlib.Path">Path</span></code>
          </td>
          <td><p>Path to the results directory corresponding to the run</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>rank_stats</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="src.pheval.analyse.rank_stats.RankStats" href="#src.pheval.analyse.rank_stats.RankStats">RankStats</a></code>
          </td>
          <td><p>RankStats instance containing rank statistics corresponding to the run</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>IOError</code>
          </td>
          <td><p>If there is an error writing to the file.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>src/pheval/analyse/rank_stats.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">write_row</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">directory</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">rank_stats</span><span class="p">:</span> <span class="n">RankStats</span><span class="p">,</span>
    <span class="n">binary_classification</span><span class="p">:</span> <span class="n">BinaryClassificationStats</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write summary rank statistics row for a run to the file.</span>

<span class="sd">    Args:</span>
<span class="sd">        directory (Path): Path to the results directory corresponding to the run</span>
<span class="sd">        rank_stats (RankStats): RankStats instance containing rank statistics corresponding to the run</span>

<span class="sd">    Raises:</span>
<span class="sd">        IOError: If there is an error writing to the file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">directory</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">top</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">top3</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">top5</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">top10</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">found</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_reciprocal_rank</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top3</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top5</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top10</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_found</span><span class="p">(),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">precision_at_k</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_average_precision_at_k</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top</span><span class="p">(),</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top3</span><span class="p">(),</span> <span class="mi">3</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top5</span><span class="p">(),</span> <span class="mi">5</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">f_beta_score_at_k</span><span class="p">(</span><span class="n">rank_stats</span><span class="o">.</span><span class="n">percentage_top10</span><span class="p">(),</span> <span class="mi">10</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                <span class="n">rank_stats</span><span class="o">.</span><span class="n">mean_normalised_discounted_cumulative_gain</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">true_positives</span><span class="p">,</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_positives</span><span class="p">,</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">true_negatives</span><span class="p">,</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_negatives</span><span class="p">,</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">sensitivity</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">specificity</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">precision</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">negative_predictive_value</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_positive_rate</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_discovery_rate</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">false_negative_rate</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">accuracy</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">f1_score</span><span class="p">(),</span>
                <span class="n">binary_classification</span><span class="o">.</span><span class="n">matthews_correlation_coefficient</span><span class="p">(),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error writing &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../prioritisation_result_types/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Prioritisation result types" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Prioritisation result types
            </div>
          </div>
        </a>
      
      
        
        <a href="../run_data_parser/" class="md-footer__link md-footer__link--next" aria-label="Next: Run data parser" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Run data parser
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@8.5.1/dist/mermaid.min.js"></script>
      
    
    
  </body>
</html>